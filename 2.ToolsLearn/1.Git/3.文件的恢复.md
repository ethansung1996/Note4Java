# 3.文件删除/恢复

**恢复已经删除的文件前提：** 删除文件之前，文件的状态已经被提交到本地库过，也就是说文件在删除前已经被git追踪到了。

## 从本地库删除某文件

想象场景：
>经理要求你写一个xx的需求，你写了几个.java文件完成了需求，并且`add and commit`到了本地库，但是过了一段时间，你发现之前写的.java文件这个需求不需要了，要求删除这个需求，此时你工作区和本地库都有这几个.java文件，你想把本地库的这些文件删除掉，怎么办？

```
1. 先把你工作区的相关的.java文件进行删除；
2. `git add xx.java`将你对相关文件的操作添加到暂存区；
3. `git commit -m "xxxx"`提交你的操作到本地库；
```

**由此我们可以知道，git不仅仅是对文件内容的控制，
其实是对我们行为的控制，只要你对已经被追踪的文件进行任何操作，删除/增加文件，这样的行为也要先添加到暂存器，然后提交到本地库，本地库也会进行同样的操作。**

## 将本地库里删除的文件恢复

想象场景：
>又隔了一段时间，你之前已经删除的xx需求，经理要求你在这个需求的基础上开发另一个功能，你怎么恢复之前写的那个需求的代码？

```
1. 查看git reflog,找到之前提交xx需求的代码那个版本,找到哈希值；
2. git reset --hard 哈希值 ，恢复到那个版本，此时你工作区就有了之前删除的.java文件
3. 当然你很可能就只想要这个需求的代码，版本还想要恢复过去，那就把代码文件拷贝出来，再把版本恢复回去，再研究你之前那个需求吧；
```

## 将暂存区删除的文件找回

想象场景：
>你已经提交了一个readme.md文件，提交到了本地库，但是你觉得该文件写的不完整，于是你把工作区的这个文件删除了，并且`git add readme.md`了。
>还没有`git commit`到本地库，第二天你觉得写的很好了不需要重写只是需要更改一些，但是你的工作区已经删除了，你需要撤销你昨天的`git add readme.md`
>使用`git reset --hard HEAD`直接将你的暂存区和你的工作区与本地库的内容同步。相当于撤销你的`git add`
>更具体的需要你真正的上手项目进行版本控制理解了，也会伴随更复杂的情况
>

















































